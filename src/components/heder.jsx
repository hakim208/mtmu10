"use client";
import { AppBar, Box, Button, Container, MenuItem, Popover, Toolbar, Typography } from "@mui/material";
import { useState } from "react";
import "./heder.css";
import ModalCustom from "./modal";


export default function HeaderFull() {
  const [anchorEl, setAnchorEl] = useState(null);
  const [openMenuId, setOpenMenuId] = useState(null);
  const [activeModal, setActiveModal] = useState(null);

  const symbols = [
    {
      id: "emblem",
      img: "https://www.maorif.tj/img/gerbtjk.png",
      text: "Нишон",
      description: "Нишони давлатӣ 1. Нишони давлатии Ҷумҳурии Тоҷикистон рамзи истиқлолияти давлатии Ҷумҳурии Тоҷикистон мебошад. 2. Нишони давлатии Ҷумҳурии Тоҷикистон иборат аст аз тасвири тоҷи тансиқшуда ва нимдоира аз ҳафт ситорае, ки бо нурҳои офтоби аз паси кӯҳҳои барфпӯш тулӯъкунанда рӯи онро гирифтааст ва бо чанбаре оро ёфтааст, ки атрофашро аз тарафи рост хӯшаҳои гандум ва аз тарафи чап шохаҳои пахтаи шукуфон иҳота кардааст. Болои чанбара бо тасмаи сераха печонда шуда, дар қисми поён рӯи курсӣ китоби боз ҷой гирифтааст. Нишони давлатии Ҷумҳурии Тоҷикистон ранга буда, тоҷ, офтоб, кӯҳҳо, хӯшаҳои гандум, китоб ва курсӣ бо зарҳал тасвир ёфта, появу баргҳои ниҳолҳои пахта сабз, рахҳои тасмаҳо сурх, сафед ва сабз буда, муқоваи китоб сурх мебошад. а) дар болои биноҳои қароргоҳи расмии Президенти Ҷумҳурии Тоҷикистон, Маҷлиси Олии Ҷумҳурии Тоҷикистон, Ҳукумати Ҷумҳурии Тоҷикистон, вазоратҳо ва кумитаҳои давлатии Ҷумҳурии Тоҷикистон; дар болои биноҳои Маҷлисҳои намояндагони халқи Вилояти Мухтори Кӯҳистони Бадахшон, вилоятҳо, ш.Душанбе, шаҳрҳо, ноҳияҳо, мақомоти ҳокимияти иҷроияи маҳалҳо (ҳукуматҳо), мақомоти худидораи шаҳрак ва деҳот (ҷамоатҳо), судҳо, мақомоти прокуратураи Ҷумҳурии Тоҷикистон; дар болои биноҳои намояндагиҳои дипломатию консулӣ ва муассисаҳои тиҷоратии дар хориҷа будаи Ҷумҳурии Тоҷикистон; б) дар толорҳои маҷлисҳои Президенти Ҷумҳурии Тоҷикистон, Маҷлиси Олии Ҷумҳурии Тоҷикистон, Раёсати Маҷлиси Олии Ҷумҳурии Тоҷикистон, Ҳукумати Ҷумҳурии Тоҷикистон, Маҷлисҳои вакилони халқи Вилояти Мухтори Кӯҳистони Бадахшон, вилоятҳо (ҳукуматҳо), шаҳри Душанбе, шаҳрҳо, ноҳияҳо, маҷлисҳои мақомоти худидораи шаҳрак ва деҳот (ҷамоатҳо), инчунин дар хонаҳо (кабинетҳои) кории Президенти Ҷумҳурии Тоҷикистон, Раиси Маҷлиси Олии Ҷумҳурии Тоҷикистон ва Сарвазири Ҷумҳурии Тоҷикистон, раисони Вилояти Мухтори Кӯҳистони Бадахшон, вилоятҳо, ш.Душанбе, шаҳрҳо, ноҳияҳо ва дар толорҳои ҷаласаҳои судии судҳои Ҷумҳурии Тоҷикистон, дар биноҳои мақомоти сабти асноди ҳолати шаҳрвандӣ ва биноҳои бақайдгирии тантанавии таваллуд ва ақди никоҳ; в) дар мӯҳру бланкҳои ҳуҷҷатҳои Президенти Ҷумҳурии Тоҷикистон, Маҷлиси Олии Ҷумҳурии Тоҷикистон, Раёсати Маҷлиси Олии Ҷумҳурии Тоҷикистон, Ҳукумати Ҷумҳурии Тоҷикистон, вазоратҳо ва кумитаҳои давлатии Ҷумҳурии Тоҷикистон, Маҷлисҳои намояндагони халқи Вилояти Мухтори Кӯҳистони Бадахшон, вилоятҳо, ш.Душанбе, шаҳрҳо, ноҳияҳо, мақомоти ҳокимияти иҷроияи маҳалҳо (ҳукуматҳо), мақомоти худидораи шаҳрак ва деҳот (ҷамоатҳо), судҳо ва мақомоти прокуратураи Ҷумҳурии Тоҷикистон, идораҳои давлатии нотариалӣ, мақомоти сабти асноди ҳолати шаҳрвандии Ҷумҳурии Тоҷикистон, инчунин корхонаҳо, муассисаҳо ва ташкилотҳои ҷумҳуриявӣ, ки бо қонунҳои Ҷумҳурии Тоҷикистон ба онҳо ҳуқуқи дар мӯҳру бланкҳои ҳуҷҷатҳо ҷой додани тасвири Нишон дода шудааст; г) дар нашрияҳои расмии Маҷлиси Олии Ҷумҳурии Тоҷикистон, Раёсати Маҷлиси Олии Ҷумҳурии Тоҷикистон ва Ҳукумати Ҷумҳурии Тоҷикистон; д) дар шиносномаи шаҳрванди Ҷумҳурии Тоҷикистон, инчунин дар шиносномаҳои дипломатӣ ва дигар шиносномаҳое, ки ба шаҳрвандони Ҷумҳурии Тоҷикистон дода мешаванд; е) дар сутунҳои марзӣ, ки дар Сарҳади давлатии Ҷумҳурии Тоҷикистон насб карда мешаванд. Қонуни Ҷумҳурии Тоҷикистон ҳолатҳои ҳатман тасвир намудани тарҳи нишони давлатии Ҷумҳурии Тоҷикистонро пешбинӣ карда метавонад. Ба корхонаҳо, муассисаҳо ва ташкилотҳое, ки дар ҳамин Низомнома номбар шудаанд, ҳуқуқи истифодаи тасвири Нишони давлатии Ҷумҳурии Тоҷикистонро фақат Ҳукумати Ҷумҳурии Тоҷикистон дода метавонад. 3. Таҷдиди тасвири Нишони давлатии Ҷумҳурии Тоҷикистон сарфи назар аз андозаҳояш, ҳамеша бояд дақиқан ба асли тарҳи ранга, сиёҳу сафед ва андозаи тасвири Нишон, ки ба ҳамин Низомнома замима мешавад, мутобиқат намояд. 4. Тартиби тайёр кардани тасвири Нишони давлатии Ҷумҳурии Тоҷикистон, нашри оммавии тасвири Нишон, тартиби истифода, нигоҳдорӣ ва нест кардани мӯҳре, ки дар он Нишони давлатӣ тасвир ёфтааст, аз тарафи Ҳукумати Ҷумҳурии Тоҷикистон муқаррар карда мешавад. 5. Ашхосе, ки дар таҳқир кардани Нишони давлатии Ҷумҳурии Тоҷикистон гунаҳкоранд, мувофиқи Қонуни Ҷумҳурии Тоҷикистон ба ҷавобгарӣ кашида мешаванд.",
    },
    {
      id: "flag",
      img: "https://www.maorif.tj/img/flagtjk.png",
      text: "Парчам",
      description: "Парчами давлатӣ 1. Парчами давлатии Ҷумҳурии Тоҷикистон рамзи истиқлолияти давлатии Ҷумҳурии Тоҷикистон мебошад. 2. Парчами давлатии Ҷумҳурии Тоҷикистон матои росткунҷаест, ки дар рӯи он се рахи рангаи ба таври уфуқӣ ҷойгирифта кашида шудааст: рахи боло ранги сурх дошта, паҳнои он ба рахи сабзи поён баробар мебошад; рахи сафеди мобайнӣ якуним баробари паҳнои яке аз рахҳои ранга аст. Дар рӯи рахи сафед, аз ҷои чӯбдаста дар мобайни парчам бо зарҳал рамзи тоҷи тансиқ шуда ва дар болои он ҳафт ситора дар шакли нимдоира тасвир шудааст. Таносуби бару дарозии умумии парчам 1:2 аст. Тоҷ ва ситораҳои парчам дар шакли росткунҷае ҷой дода шудааст, ки паҳлуи амудиаш 0,8 ва паҳлуи уфуқиаш 1,0-и паҳнои рахи сафед аст. Ситораҳои панҷгӯша дар доираи қутраш 0,15 акс ёфта, дар нимдоираи радиусаш 0,5-и паҳнои рахи сафед ҷой мегиранд. Тоҷи баландиаш 0,55-и паҳнои рахи сафед, ба асос ба таври нимдоираи радиусаш 1,2-и бари рахи сафед моил мегардад. Чор унсури камоншакл, ки болои тоҷро ташкил медиҳанд, дар марказ бо қисмати доираи қутраш 0, 2-и рахи сафед васл мегарданд. 3. Парчами давлатии Ҷумҳурии Тоҷикистон дар ҷойҳои зайл афрохта мешавад: - дар болои биноҳои қароргоҳи расмии Президенти Ҷумҳурии Тоҷикистон, Маҷлиси Олии Ҷумҳурии Тоҷикистон, Ҳукумати Ҷумҳурии Тоҷикистон, судҳои Ҷумҳурии Тоҷикистон, мақомоти Ҳокимияти иҷроияи маҳалҳо (ҳукуматҳо), мақомоти худидораи шаҳрак ва деҳот (ҷамоатҳо) - доимӣ; - дар болои биное, ки иҷлосияҳои Маҷлиси Олии Ҷумҳурии Тоҷикистон ё иҷлосияҳои Маҷлисҳои вакилони халқи Вилояти Мухтори Кӯҳистони Бадахшон, Маҷлисҳои вакилони халқи вилоятҳо, шаҳрҳо, ноҳияҳо, гузаронда мешаванд - дар тамоми давраи гузаштани иҷлосияҳо, маҷлисҳои намояндагон (ҷамоат)-дар тамоми давраи маҷлис; - дар болои биноҳои вазоратҳо, кумитаю идораҳои давлатӣ, дигар мақомоти давлатии Ҷумҳурии Тоҷикистон, корхонаҳо, муассисаҳо ва ташкилотҳо, иттиҳодияю ташкилотҳои ҷамъиятӣ, дар болои биноҳои истиқоматӣ - дар рӯзҳои ид ва рӯзҳои хотиравие, ки қонуни Ҷумҳурии Тоҷикистон муайян намудааст; - дар болои биноҳо ва васоити нақлиёти намояндагиҳои дипломатӣ ва консулӣ, инчунин дар болои иморатҳои муассисаҳои тиҷоратии дар хориҷа будаи Ҷумҳурии Тоҷикистон, дар болои васоити нақлиётие, ки дар дохили онҳо ба сифати ашхоси расмӣ Президенти Ҷумҳурии Тоҷикистон, Раиси Маҷлиси Олии Ҷумҳурии Тоҷикистон, Сарвазири Ҷумҳурии Тоҷикистон ё дигар ашхос нишастаанд, - мувофиқи тартиби муқарраркардаи Ҳукумати Ҷумҳурии Тоҷикистон; - дар биноҳои раъйдиҳӣ - дар рӯзҳои интихобот ва раъйпурсӣ; - дар толорҳои ҷаласаҳои судии судҳои Ҷумҳурии Тоҷикистон; - дар қисмҳои ҳарбии Ҷумҳурии Тоҷикистон - мутобиқи оинномаҳои ҳарбӣ; - дар постгоҳҳои марзӣ (заставаҳо) ва нуқтаҳои рухсатдиҳии (гумрукии) Сарҳади давлатии Ҷумҳурии Тоҷикистон; - мувофиқи амри Президенти Ҷумҳурии Тоҷикистон, Раёсати Маҷлиси Олии Ҷумҳурии Тоҷикистон ё Ҳукумати Ҷумҳурии Тоҷикистон Парчами давлатии Ҷумҳурии Тоҷикистон инчунин ҳангоми гузаронидани маросимҳо ва дигар чорабиниҳои тантанавӣ, ки мақомоти давлатӣ мегузаронанд, афрохтан мумкин аст. 4. Парчами давлатии Ҷумҳурии Тоҷикистон дар толорҳои маҷлисҳои Президенти Ҷумҳурии Тоҷикистон, Маҷлиси Олии Ҷумҳурии Тоҷикистон, Раёсати Маҷлиси Олии Ҷумҳурии Тоҷикистон, Ҳукумати Ҷумҳурии Тоҷикистон, Маҷлисҳои маҳаллии намояндагони халқи Ҷумҳурии Тоҷикистон, мақомоти ҳокимияти иҷроияи маҳалҳо (ҳукуматҳо), ҳамчунин дар хонаҳои (кабинетҳои) кории Президенти Ҷумҳурии Точикистон, Раиси Маҷлиси Олии Ҷумҳурии Тоҷикистон, Сарвазири Ҷумҳурии Тоҷикистон, раисони Вилояти Мухтори Кӯҳистони Бадахшон, вилоятҳо, шаҳри Душанбе, шаҳру ноҳияҳо ва хонаҳое, ки вакилони халқи Ҷумҳурии Тоҷикистон интихобкунандагонро доимо қабул мекунанд, ҷойгир карда мешавад. 5. Ҳангоми мотам бо Қарори Президенти Ҷумҳурии Тоҷикистон, Раёсати Маҷлиси Олии Ҷумҳурии Тоҷикистон ё Ҳукумати Ҷумҳурии Тоҷикистон Парчами давлатии Ҷумҳурии Тоҷикистон ба шакли мотамӣ афрохта шуда метавонад. Дар ин маврид ба чӯбдасти (меҳвари фулузӣ) парчам матои тасмашакли сиёҳ баста мешавад, ки нӯгҳои он бояд то қисми поёни парчам овезон бошад. Дар сурати бо чӯбдаста афрохтани парчам ҳангоми мотам парчам ба андозаи 1/3-и дарозии чубдаста хам карда мешавад. 6. Тасвири Парчами давлатии Ҷумҳурии Тоҷикистон дар киштиҳои ҳавоие, ки дар қайди Ҷумҳурии Тоҷикистон мебошанд, ҷойгир мешавад. 7. Парчами давлатии Ҷумҳурии Тоҷикистон метавонад доимо дар ҷойҳои истироҳати шаҳрвандон, боғҳо, хиёбонҳо, гулгаштҳо, дар болои биноҳои истиқоматӣ ва дигар ҷойҳо, инчунин тасвири он ба мақсади ороишӣ ба сифати рамзи давлатӣ ва миллӣ тавре истифода гардад, ки дар ин маврид нисбат ба Парчами давлатии Ҷумҳурии Тоҷикистон беҳурматӣ содир нашавад. 8. Парчами давлатии Ҷумҳурии Тоҷикистон ва тасвири он қатъи назар аз андозаҳои онҳо доимо бояд дақиқ ба асли ранг ва асли тасвири нақшагии он, ки ба ҳамин Низомнома замима мегардад, мутобиқат дошта бошад. 9. Ашхосе, ки ба таҳқири Парчами давлатии Ҷумҳурии Тоҷикистон гунаҳкоранд мутобиқи Қонуни Ҷумҳурии Тоҷикистон ҷавобгар мебошанд. 10. Тартиби тайёр кардани Парчами давлатии Ҷумҳурии Тоҷикистонро Ҳукумати Ҷумҳурии Тоҷикистон тасдиқ менамояд.",
    },
  ];

  const menuItems = [
    { id: "home", label: "Асосӣ" },
    {
      id: "achievements",
      label: "Ифтихорот",
      submenu: [
        { label: "Ҷоизаҳо", path: "/achievements/joizaho" },
        { label: "Дипломҳо", path: "/achievements/diplomho" },
        { label: "Медалҳо", path: "/achievements/medalho" },
      ],
    },
    {
      id: "teachers",
      label: "Омӯзгорон",
      submenu: [
        { label: "Муаллимони фаннӣ", path: "/teachers/fan" },
        { label: "Роҳбарият", path: "/teachers/rohbariyat" },
        { label: "Кормандон", path: "/teachers/kormandon" },
      ],
    },
    {
      id: "contact",
      label: "Матбуот",
      submenu: [
        { label: "Хабарҳо", path: "/contact/khabarho" },
        { label: "Эълонҳо", path: "/contact/eolonho" },
        { label: "Вокунишҳо", path: "/contact/vokunishho" },
        { label: "Тамос", path: "/contact/tamos" },
      ],
    },
  ];

  const handleMouseEnter = (event, id) => {
    setAnchorEl(event.currentTarget);
    setOpenMenuId(id);
  };

  const handleMouseLeave = () => {
    setAnchorEl(null);
    setOpenMenuId(null);
  };

  return (
    <>
      {/* Header 1 */}
      <AppBar position="static" sx={{ bgcolor: "#f9fafb", color: "black", boxShadow: "none" }}>
        <Container maxWidth="xl">
          <Toolbar sx={{ justifyContent: "space-between" }}>
            {/* Рамзҳо */}
            <Box sx={{ display: "flex", gap: 3, paddingLeft: 3, alignItems: "center" }}>
              {symbols.map((symbol) => (
                <Box
                  key={symbol.id}
                  onClick={() => setActiveModal(symbol.id)}
                  sx={{
                    display: "flex",
                    alignItems: "center",
                    gap: 1,
                    cursor: "pointer",
                    p: 1,
                    borderRadius: 1,
                    "&:hover": { bgcolor: "grey.100" },
                    transition: "all 0.2s ease-in-out",
                  }}
                >
                  <img src={symbol.img} alt={symbol.text} style={{ width: 30, height: 25 }} />
                  <Typography fontWeight={600} fontSize={14}>
                    {symbol.text}
                  </Typography>
                </Box>
              ))}

              {symbols.map((symbol) => (
                <ModalCustom
                  key={symbol.id}
                  isOpen={activeModal === symbol.id}
                  onClose={() => setActiveModal(null)}
                  img={symbol.img}
                  text={symbol.text}
                  description={symbol.description}
                />
              ))}
            </Box>

            {/* Телефон ва шабакаҳо */}
            <Box sx={{ display: "flex", alignItems: "center", gap: 3 }}>
              <Box sx={{ display: "flex", alignItems: "center", gap: 1 }}>
                <img
                  src="https://www.freeiconspng.com/uploads/tel-phone-icon-5.png"
                  alt="Phone"
                  style={{ width: 18, height: 18, filter: "invert(30%)" }}
                />
                <a href="tel:+992372244170" className="text-gray-800 font-medium hover:text-blue-700 transition">
                  +992 372 24 41 70
                </a>
              </Box>
              <Box sx={{ display: "flex", gap: 2 }}>
                {["telegram", "youtube", "instagram", "facebook"].map((social) => (
                  <img
                    key={social}
                    src={`https://www.maorif.tj/img/svg/${social}.svg`}
                    alt={social}
                    style={{
                      width: 35,
                      height: 35,
                      cursor: "pointer",
                      opacity: 0.8,
                      transition: "opacity 0.2s",
                    }}
                    onMouseEnter={(e) => (e.currentTarget.style.opacity = "1")}
                    onMouseLeave={(e) => (e.currentTarget.style.opacity = "0.8")}
                  />
                ))}
              </Box>
            </Box>
          </Toolbar>
        </Container>
      </AppBar>

      {/* Header 2 */}
      {!activeModal && (
        <AppBar
          position="sticky"
          sx={{
            background: "linear-gradient(135deg, #1e40af 0%, #1e3a8a 100%)",
            boxShadow: "0 4px 10px rgba(0,0,0,0.15)",
            zIndex: 1200,
          }}
        >
          <Container maxWidth="xl">
            <Toolbar sx={{ justifyContent: "space-between" }}>
              {/* Logo */}
              <Typography
                variant="h4"
                sx={{
                  fontWeight: 500,
                  background: "linear-gradient(to right, #fff, #fde68a)",
                  WebkitBackgroundClip: "text",
                  color: "transparent",
                }}
              >
                МТМУ №10
              </Typography>

              {/* Меню */}
              <Box sx={{ display: "flex", gap: 1 }}>
                {menuItems.map((item) => (
                  <Box
                    key={item.id}
                    onMouseEnter={(e) => item.submenu && handleMouseEnter(e, item.id)}
                    onMouseLeave={handleMouseLeave}
                    sx={{ position: "relative" }}
                  >
                    <Button
                      sx={{
                        color: "white",
                        fontWeight: 400,
                        fontSize: "14px",
                        px: 3,
                        "&:hover": {
                          color: "#fbbf24",
                          backgroundColor: "rgba(255,255,255,0.1)",
                        },
                        transition: "all 0.25s ease-in-out",
                      }}
                    >
                      {item.label}
                    </Button>

                    {item.submenu && (
                      <Popover
                        open={openMenuId === item.id}
                        anchorEl={anchorEl}
                        onClose={handleMouseLeave}
                        anchorOrigin={{
                          vertical: "bottom",
                          horizontal: "center",
                        }}
                        transformOrigin={{
                          vertical: "top",
                          horizontal: "center",
                        }}
                        sx={{
                          "& .MuiPopover-paper": {
                            width: "100vw",
                            left: "0 !important",
                            right: "0 !important",
                            borderTop: "3px solid #f59e0b",
                            boxShadow: "0 8px 20px rgba(0,0,0,0.15)",
                            animation: "fadeIn 0.25s ease-out",
                          },
                        }}
                        PaperProps={{
                          sx: {
                            backgroundColor: "#fff",
                            py: 2,
                          },
                        }}
                      >
                        <Container maxWidth="xl">
                          <Box
                            sx={{
                              display: "flex",
                              flexDirection: "column",
                              alignItems: "center",
                              gap: 2,
                            }}
                          >
                            <Typography
                              variant="h5"
                              sx={{
                                fontWeight: "bold",
                                color: "#1e40af",
                                mb: 2,
                              }}
                            >
                              {item.label}
                            </Typography>
                            <Box
                              sx={{
                                display: "flex",
                                justifyContent: "center",
                                gap: 4,
                                flexWrap: "wrap",
                                width: "100%",
                              }}
                            >
                              {item.submenu.map((sub, index) => (
                                <MenuItem
                                  key={index}
                                  sx={{
                                    fontWeight: 600,
                                    fontSize: "15px",
                                    color: "#6b7280",
                                    px: 3,
                                    py: 1.5,
                                    "&:hover": {
                                      color: "#1e40af",
                                      backgroundColor: "#fef3c7",
                                      borderRadius: 2,
                                      transform: "translateY(-2px)",
                                    },
                                    transition: "all 0.25s ease",
                                  }}
                                >
                                  {sub.label} {/* ИСЛОҲ: sub.label */}
                                </MenuItem>
                              ))}
                            </Box>
                          </Box>
                        </Container>
                      </Popover>
                    )}
                  </Box>
                ))}
              </Box>
            </Toolbar>
          </Container>
        </AppBar>
      )}
    </>
  );
}
